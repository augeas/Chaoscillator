<html>
	<head>
		<link rel="stylesheet" href="jquery-ui-1.10.3.custom/css/trontastic/jquery-ui-1.10.3.custom.css">
		
		<style>

		</style>
		
		<script src="modernizr.custom.27349.js"></script>		
		<script src="jquery-ui-1.10.3.custom/js/jquery-1.9.1.js"></script>
		<script src="jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.js"></script>
		
		<script src="attractors.js"></script>
		<script src="trace.js"></script>
		
		<script>
					
			$(document).ready(function() {
						
				if (Modernizr.svg) {
					$("#chaoscillator").show();
				}	
					
				var gotAudio = true;	
			
				if (typeof AudioContext !== "undefined") {
					context = new AudioContext();
				} else if (typeof webkitAudioContext !== "undefined") {
					context = new webkitAudioContext();
				} else {
					gotAudio = false;
				}
			
				if (gotAudio)
				{
					ltrace = new trace('scope',new lorentz(10.0,28.0,8/3.0),context);
				}
				else {
					ltrace = new trace('scope',new lorentz(10.0,28.0,8/3.0),false);
				}
			
				$('#oscSelect').buttonset();
				$('#planeSelect').buttonset();
						
				$("#losc").click(function() {ltrace.setAttractor(new lorentz(10.0,28.0,8/3.0));});
				$("#cosc").click(function() {ltrace.setAttractor(new chua(15.6,25.0));});
				$("#rosc").click(function() {ltrace.setAttractor(new rossler(0.1,0.1,14.0));});
				$("#fara").click(function() {ltrace.setAttractor(new fabrab(0.98,0.1));});
			
				$("button").button();
				$("#chaosSlide").slider({ min:0, max:100, value:80, change:function() {ltrace.setChaos(); } });
				$("#timeSlide").slider({ min:0, max:100, value:80, change:function() {ltrace.setSpeed(); } });

				if (gotAudio) {
			
					$("#volSlide").slider({ min:0, max:100, value:25, change:function() {ltrace.setVol(); } });
					$('#channelSelect').buttonset();
					$('#lc').click(function() {ltrace.setLeftChannel();});
					$('#rc').click(function() {ltrace.setRightChannel();});
					$('#sc').click(function() {ltrace.setStereo();});
			
					$('#balanceVar').buttonset();
					$("#0b").click(function() {ltrace.setVar('nobalance','null');});
					$("#xb").click(function() {ltrace.setVar('balancevar','x');});
					$("#yb").click(function() {ltrace.setVar('balancevar','y');});
					$("#zb").click(function() {ltrace.setVar('balancevar','z');});

					$("#leftFreqRangeSlide").slider({ min:0, max:100, value:25, change:function() {ltrace.setLeftFreqRange(); }});
					$("#leftModRangeSlide").slider({ min:0, max:100, value:75, change:function() {ltrace.setLeftModRange(); } });
			
					$("#leftFreqVar").buttonset();
			
					$("#lfx").click(function() {ltrace.setVar('lfv','x');});
					$("#lfy").click(function() {ltrace.setVar('lfv','y');});
					$("#lfz").click(function() {ltrace.setVar('lfv','z');});
			
					$("#leftModVar").buttonset();

					$("#lm0").click(function() {ltrace.stopLeftModulation();});
					$("#lmx").click(function() {ltrace.setVar('lmv','x');});
					$("#lmy").click(function() {ltrace.setVar('lmv','y');});
					$("#lmz").click(function() {ltrace.setVar('lmv','z');});			
			
					$("#rightFreqRangeSlide").slider({ min:0, max:100, value:75, change:function() {ltrace.setRightFreqRange(); }});
					$("#rightModRangeSlide").slider({ min:0, max:100, value:25, change:function() {ltrace.setRightModRange(); } });
			
					$("#rightFreqVar").buttonset();
		
					$("#rfx").click(function() {ltrace.setVar('rfv','x');});
					$("#rfy").click(function() {ltrace.setVar('rfv','y');});
					$("#rfz").click(function() {ltrace.setVar('rfv','z');});		
		
					$("#rightModVar").buttonset();

					$("#rm0").click(function() {ltrace.stopRightModulation();});
					$("#rmx").click(function() {ltrace.setVar('rmv','x');});
					$("#rmy").click(function() {ltrace.setVar('rmv','y');});
					$("#rmz").click(function() {ltrace.setVar('rmv','z');});
				
					$("#audioControls").show();
				
				}	
				else {
					$("#audioFail").show();
				}	
			
				ltrace.init();
						
				window.setInterval(function(){ltrace.tick()},10);
		
			});	
				
		</script>
		
		<title>Dr Greenway's Chaoscillator. File under "Math Rock"</title>
		
	</head>

	<body>	
		<div id="chaoscillator" style="width:600px; display:none">
			<div>
				<svg xmlns="http://www.w3.org/2000/svg"
					xmlns:xlink="http://www.w3.org/1999/xlink"
					id="scope" 
					xmlns="http://www.w3.org/2000/svg"
					xmlns:xlink="http://www.w3.org/1999/xlink" 
					width="600" height="400">
			
					<rect x="0" y="0" rx="30" ry="30" width="600" height="400" style="fill:black;stroke:black;stroke-width:5;"/>
				</svg>
			</div>
		
			<div style="position:relative; height:30px; border-style:outset; border-width:10px; ">
				<div id="timeSlide" style="position:absolute; left:5px; top:8px; width:270px; text-align:center;">
					<span style="vertical-align:middle; font-size:small;">speed</span>
				</div>
			
				<div id="chaosSlide" style="position:absolute; right:5px; top:8px; width:270px; text-align:center;">
					<span style="vertical-align:middle; font-size:small;">chaos</span>
				</div>

			</div>

			<div style="position:relative; border-style:outset; border-width:10px; height:30px;">

				<div id="oscSelect" style="position:absolute; left:0px; top:0px;">
					<input type="radio" id="lorrentz" name="oscType" checked="checked"><label id='losc' style="font-size:small;" for="lorrentz">Lorrentz</label>
					<input type="radio" id="chua" name="oscType"><label id='cosc' style="font-size:small;" for="chua">Chua</label>
					<input type="radio" id="rossler" name="oscType"><label id='rosc' style="font-size:small;" for="rossler">Rossler</label>
					<!-- <input type="radio" id="fabrab" name="oscType"><label id='fara' style="font-size:small;" for="fabrab">Rabinovich-Fabrikant</label> -->
				</div>
				
				<div id="planeSelect" style="position:absolute; right:0px; top:0px;">
					<input type="radio" id="xyplane" name="plane"><label style="font-size:small;" for="xyplane" onClick="ltrace.newPlane('x','y')">x-y</label>
					<input type="radio" id="xzplane" name="plane" checked="checked"><label style="font-size:small;" for="xzplane" onClick="ltrace.newPlane('x','z')">x-z</label>
					<input type="radio" id="yzplane" name="plane"><label style="font-size:small;" for="yzplane" onClick="ltrace.newPlane('y','z')">y-z</label>
				</div>

			</div>

			<div id="audioFail" style="position:relative; border-style:outset; border-width:10px; display:none">
				<div class="ui-widget" style="color:#00FF88; background-color:000;">
					<p  style="font-size:small;">You won't be able to hear anything, as your browser doesn't support the web audio API.</p>
					<p  style="font-size:small;">Come back with one that does, like Chromium, Chrome or Safari, perhaps even Firefox 23.<p>
					<p  style="font-size:small;">(Yes <a style="color:#00FF88" href="https://github.com/g200kg/WAAPISim">WAAPISim</a> has been tried, but it just didn't sound right.)</p>
				</div>	
			</div>
		
			<div id="audioControls" style="position:relative; display:none">
							
				<div style="position:absolute; width:580px; top:0px; height:30px; border-style:outset; border-width:10px;">
					<div id="volSlide" style="position:absolute; left:5; top:8; width:240px; text-align:center;">
						<span style="vertical-align:middle; font-size:small;">vol</span>
					</div>
				</div>

					<div id="channelSelect" style="position:absolute; right:160; top:10;">
						<input type="radio" id="both" name="channel" checked="checked"><label id='sc' style="font-size:small;" for="both">stereo</label>
						<input type="radio" id="leftonly" name="channel"><label id='lc' style="font-size:small;" for="leftonly">left</label>
						<input type="radio" id="rightonly" name="channel"><label id='rc' style="font-size:small;" for="rightonly">right</label>
					</div>


					<div id="balanceVar" style="position:absolute; right:10; top:10;">
						<input type="radio" id="none" name="balance" ><label id='0b' style="font-size:small;" for="none">0</label>
						<input type="radio" id="xbalance" name="balance" checked="checked" ><label id='xb' style="font-size:small;" for="xbalance">x</label>
						<input type="radio" id="ybalance" name="balance"><label id='yb' style="font-size:small;" for="ybalance">y</label>
						<input type="radio" id="zbalance" name="balance"><label id='zb' style="font-size:small;" for="zbalance">z</label>
					</div>

							
				<div style="position:absolute; width:280px; top:50px; height:30px; border-style:outset; border-width:10px;">
					<div id="leftFreqRangeSlide" style="position:absolute; left:5; top:8; width:160px; text-align:center;">
						<span style="vertical-align:middle; font-size:small;">L freq</span>
					</div>
					
					<div id="leftFreqVar" style="position:absolute; right:0;">
						<input type="radio" id="leftfx" name="leftf"><label id='lfx' style="font-size:small;" for="leftfx">x</label>
						<input type="radio" id="leftfy" name="leftf" checked="checked"><label id='lfy' style="font-size:small;" for="leftfy">y</label>
						<input type="radio" id="leftfz" name="leftf"><label id='lfz' style="font-size:small;" for="leftfz">z</label>
					</div>
				</div>
			
				
				<div style="position:absolute; top:100px; width:280px; height:30px; border-style:outset; border-width:10px;">	
					<div id="leftModRangeSlide" style="position:absolute; left:5; top:8; width:120px; text-align:center;">
						<span style="vertical-align:middle; font-size:small;">L mod</span>
					</div>

					<div id="leftModVar" style="position:absolute; right:0; top:0;">
						<input type="radio" id="leftm0" name="leftm"><label id='lm0' style="font-size:small;" for="leftm0">0</label>
						<input type="radio" id="leftmx" name="leftm"><label id='lmx' style="font-size:small;" for="leftmx">x</label>
						<input type="radio" id="leftmy" name="leftm"><label id='lmy' style="font-size:small;" for="leftmy">y</label>
						<input type="radio" id="leftmz" name="leftm" checked="checked"><label id='lmz' style="font-size:small;" for="leftmz">z</label>
					</div>					
							
				</div>
				
				<div style="position:absolute; left: 300px; top:50px; width:280px; height:30px; border-style:outset; border-width:10px;">
					<div id="rightFreqRangeSlide" style="position:absolute; left:5; top:8; width:160px; text-align:center;">
						<span style="vertical-align:middle; font-size:small;">R freq</span>
					</div>
				
					<div id="rightFreqVar" style="position:absolute; right:0; top:0;">
						<input type="radio" id="rightfx" name="rightf"><label id='rfx' style="font-size:small;" for="rightfx">x</label>
						<input type="radio" id="rightfy" name="rightf"><label id='rfy' style="font-size:small;" for="rightfy">y</label>
						<input type="radio" id="rightfz" name="rightf" checked="checked"><label id='rfz' style="font-size:small;" for="rightfz">z</label>
					</div>
					
				</div>
				

				<div style="position:absolute; left: 300px; top:100px; width:280px; height:30px; border-style:outset; border-width:10px;">
					<div id="rightModRangeSlide" style="position:absolute; left:5; top:8; width:120px; text-align:center;">
						<span style="vertical-align:middle; font-size:small;">R mod</span>
					</div>
				
					<div id="rightModVar" style="position:absolute; right:0; top:0;">
						<input type="radio" id="rightm0" name="rightm"><label id='rm0' style="font-size:small;" for="rightm0">0</label>
						<input type="radio" id="rightmx" name="rightm"><label id='rmx' style="font-size:small;" for="rightmx">x</label>
						<input type="radio" id="rightmy" name="rightm" checked="checked"><label id='rmy' style="font-size:small;" for="rightmy">y</label>
						<input type="radio" id="rightmz" name="rightm" ><label id='rmz' style="font-size:small;" for="rightmz">z</label>
					</div>
					
				</div>
					
			<div>

		</div>
	</body>

</html>